name: Learning GitHub Script

on:
  issues:
    types: [opened]

jobs:
  - name: Checkout repo
    uses: github/checkout@v1
    
  - name: Comment on issue
    uses: actions/github-script@0.8.0
    with:
      github-token: ${{secrets.GITHUB_TOKEN}}
      script: |
        const fs = require('fs')
        const issueBody = fs.readFileSync(".github/ISSUE_REPONSES/comment.md")
        github.issues.createComment({
        issue_number: context.issue.number,
        owner: context.repo.owner,
        repo: context.repo.repo,
        body: issueBody
        })
  - name: Add issue to project board
    if: contains(github.event.issues.label.*.name, 'bug')
    uses: action-script@0.8.0
    with:
      gitHub-token: ${{secrets.GITHUB_TOKEN}}
      script: |
        github.projects.createCard({
        column_id: 18868505,
        content_id: context.payload.issue.id,
        content_type: "Issue"
        })
